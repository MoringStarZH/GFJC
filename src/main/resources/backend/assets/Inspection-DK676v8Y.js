import{g as B,u as D}from"./index-CM78VC0T.js";import{d as E,r as C,j as y,o as T,c as R,n as e,l as t,m as n,g as q,e as p,u as i,x as M,a as O,i as P,_ as A}from"./index-D_0vH8B_.js";const G={class:"dialog-footer"},H=E({__name:"Inspection",setup(J){const{proxy:c}=P();let r=C({name:"",page:1,pageSize:5}),w=y(1),f=C([]);const _=y(!1),s=C({});function h(a){Object.assign(s,a),_.value=!0}const k=a=>{r.pageSize=a,u()},z=a=>{r.page=a,u()};function x(a){a&&a.resetFields()}async function $(){c.$startLoading();const a=await D(s.id,s);if(c.$closeLoading(),_.value=!1,a.code!=1)return c.$message.error("更新失败");c.$message.success("更新成功"),u()}const u=async()=>{const a=await B(r);if(a.code!==1)return c.$message.error("获取列表失败");f.splice(0,f.length,...a.data.records),w.value=a.data.total};return T(()=>{u()}),(a,l)=>{const g=n("el-breadcrumb-item"),I=n("el-breadcrumb"),m=n("el-button"),b=n("el-input"),V=n("el-col"),S=n("el-row"),d=n("el-table-column"),U=n("el-table"),N=n("el-pagination"),F=n("el-card"),v=n("el-form-item"),L=n("el-form"),j=n("el-dialog");return q(),R("div",null,[e(I,{separator:"/"},{default:t(()=>[e(g,{to:{path:"/home"}},{default:t(()=>[p("首页")]),_:1}),e(g,null,{default:t(()=>[p("人员管理")]),_:1}),e(g,null,{default:t(()=>[p("巡检人员")]),_:1})]),_:1}),e(F,null,{default:t(()=>[e(S,{gutter:20},{default:t(()=>[e(V,{span:8,offset:0},{default:t(()=>[e(b,{placeholder:"输入用户名查询",modelValue:i(r).name,"onUpdate:modelValue":l[0]||(l[0]=o=>i(r).name=o),clearable:"",onClear:u},{append:t(()=>[e(m,{icon:i(M),onClick:u},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),e(V,{span:4,offset:0},{default:t(()=>[e(m,{type:"primary",onClick:l[1]||(l[1]=o=>a.addDialogVisible=!0)},{default:t(()=>[p("新增")]),_:1})]),_:1})]),_:1}),e(U,{data:i(f),stripe:"",border:"",fit:"",style:{width:"100%"}},{default:t(()=>[e(d,{fixed:"",type:"index",sortable:"",label:"序号",align:"center",width:"100"}),e(d,{prop:"id",label:"ID",align:"center",width:"200"}),e(d,{prop:"nickName",label:"用户名",align:"center",width:"150"}),e(d,{prop:"password",label:"密码",align:"center",width:"300"}),e(d,{prop:"phone",label:"手机号",align:"center",width:"120"}),e(d,{prop:"createTime",sortable:"",label:"创建时间",align:"center",width:"300"}),e(d,{prop:"updateTime",sortable:"",label:"最后更新时间",align:"center",width:"300"}),e(d,{fixed:"right",label:"操作",width:"120",align:"center"},{default:t(o=>[e(m,{link:"",type:"primary",size:"small",onClick:K=>h(o.row)},{default:t(()=>[p("编辑")]),_:2},1032,["onClick"]),e(m,{link:"",type:"primary",size:"small"},{default:t(()=>[p("删除")]),_:1})]),_:1})]),_:1},8,["data"]),e(N,{"current-page":i(r).page,"onUpdate:currentPage":l[2]||(l[2]=o=>i(r).page=o),"page-size":i(r).pageSize,"onUpdate:pageSize":l[3]||(l[3]=o=>i(r).pageSize=o),"page-sizes":[5,10,15,20],layout:"total, sizes, prev, pager, next, jumper",total:i(w),onSizeChange:k,onCurrentChange:z},null,8,["current-page","page-size","total"])]),_:1}),e(j,{"align-center":"",title:"编辑",modelValue:_.value,"onUpdate:modelValue":l[7]||(l[7]=o=>_.value=o),width:"50%",onClose:l[8]||(l[8]=o=>x(a.editFormRef))},{footer:t(()=>[O("span",G,[e(m,{onClick:l[6]||(l[6]=o=>_.value=!1)},{default:t(()=>[p("取 消")]),_:1}),e(m,{type:"primary",onClick:$},{default:t(()=>[p("确 定")]),_:1})])]),default:t(()=>[e(L,{model:s,ref:"editFormRef","label-width":"100px"},{default:t(()=>[e(v,{label:"姓名",prop:"name"},{default:t(()=>[e(b,{modelValue:s.nickName,"onUpdate:modelValue":l[4]||(l[4]=o=>s.nickName=o)},null,8,["modelValue"])]),_:1}),e(v,{label:"手机号",prop:"phone"},{default:t(()=>[e(b,{modelValue:s.phone,"onUpdate:modelValue":l[5]||(l[5]=o=>s.phone=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),X=A(H,[["__scopeId","data-v-adf4ec7a"]]);export{X as default};
