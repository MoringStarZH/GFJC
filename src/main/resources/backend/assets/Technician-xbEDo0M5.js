import{e as M,c as P,u as G}from"./index-CWz7Ae3v.js";import{b as H,a as V,r as k,o as J,c as K,q as e,m as t,n as d,i as Q,g as u,u as p,s as W,e as F,k as X,_ as Y}from"./index-kk0mXoR3.js";const Z={class:"dialog-footer"},ee={class:"dialog-footer"},le=H({__name:"Technician",setup(te){const{proxy:m}=X();let s=V({name:"",page:1,pageSize:5}),y=k(1),v=V([]);const w=k(!1),n=V({nickName:"",password:"",phone:""}),g=k(!1),r=V({});function S(o){Object.assign(r,o),g.value=!0}async function L(){if(n.nickName===""||n.password===""||n.phone==="")return m.$message.error("请添加完整信息");m.$startLoading();const o=await P(n);m.$closeLoading(),console.log(o)}const T=o=>{s.pageSize=o,f()},I=o=>{s.page=o,f()},E=()=>{n.nickName="",n.password="",n.phone="",w.value=!0};function U(o){o&&o.resetFields()}async function $(){m.$startLoading();const o=await G(r.id,r);if(m.$closeLoading(),g.value=!1,o.code!=1)return m.$message.error("更新失败");m.$message.success("更新成功"),f()}function R(o){Object.assign(r,o),$()}const f=async()=>{const o=await M(s);if(o.code!==1)return m.$message.error("获取列表失败");v.splice(0,v.length,...o.data.records),y.value=o.data.total};return J(()=>{f()}),(o,a)=>{const C=d("el-breadcrumb-item"),j=d("el-breadcrumb"),c=d("el-button"),_=d("el-input"),z=d("el-col"),B=d("el-row"),i=d("el-table-column"),D=d("el-switch"),q=d("el-table"),A=d("el-pagination"),O=d("el-card"),b=d("el-form-item"),N=d("el-form"),x=d("el-dialog");return Q(),K("div",null,[e(j,{separator:"/"},{default:t(()=>[e(C,{to:{path:"/home"}},{default:t(()=>[u("首页")]),_:1}),e(C,null,{default:t(()=>[u("人员管理")]),_:1}),e(C,null,{default:t(()=>[u("巡检人员")]),_:1})]),_:1}),e(O,null,{default:t(()=>[e(B,{gutter:20},{default:t(()=>[e(z,{span:8,offset:0},{default:t(()=>[e(_,{placeholder:"输入用户名查询",modelValue:p(s).name,"onUpdate:modelValue":a[0]||(a[0]=l=>p(s).name=l),clearable:"",onClear:f},{append:t(()=>[e(c,{icon:p(W),onClick:f},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),e(z,{span:4,offset:0},{default:t(()=>[e(c,{type:"primary",onClick:E},{default:t(()=>[u("新增")]),_:1})]),_:1})]),_:1}),e(q,{data:p(v),stripe:"",border:"",fit:"",style:{width:"100%"}},{default:t(()=>[e(i,{fixed:"",type:"index",sortable:"",label:"序号",align:"center",width:"100"}),e(i,{prop:"id",label:"ID",align:"center",width:"200"}),e(i,{prop:"nickName",label:"用户名",align:"center",width:"150"}),e(i,{prop:"password",label:"密码",align:"center",width:"300"}),e(i,{prop:"phone",label:"手机号",align:"center",width:"120"}),e(i,{prop:"createTime",sortable:"",label:"创建时间",align:"center",width:"300"}),e(i,{prop:"updateTime",sortable:"",label:"最后更新时间",align:"center",width:"300"}),e(i,{prop:"status",label:"状态",align:"center",width:"150"},{default:t(l=>[e(D,{modelValue:l.row.status,"onUpdate:modelValue":h=>l.row.status=h,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},"active-value":1,"inactive-value":0,onClick:h=>R(l.row)},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:1}),e(i,{fixed:"right",label:"操作",width:"120",align:"center"},{default:t(l=>[e(c,{link:"",type:"primary",size:"small",onClick:h=>S(l.row)},{default:t(()=>[u("编辑")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(A,{"current-page":p(s).page,"onUpdate:currentPage":a[1]||(a[1]=l=>p(s).page=l),"page-size":p(s).pageSize,"onUpdate:pageSize":a[2]||(a[2]=l=>p(s).pageSize=l),"page-sizes":[5,10,15,20],layout:"total, sizes, prev, pager, next, jumper",total:p(y),onSizeChange:T,onCurrentChange:I},null,8,["current-page","page-size","total"])]),_:1}),e(x,{"align-center":"",title:"编辑",modelValue:g.value,"onUpdate:modelValue":a[6]||(a[6]=l=>g.value=l),width:"50%",onClose:a[7]||(a[7]=l=>U(o.editFormRef))},{footer:t(()=>[F("span",Z,[e(c,{onClick:a[5]||(a[5]=l=>g.value=!1)},{default:t(()=>[u("取 消")]),_:1}),e(c,{type:"primary",onClick:$},{default:t(()=>[u("确 定")]),_:1})])]),default:t(()=>[e(N,{model:r,ref:"editFormRef","label-width":"100px"},{default:t(()=>[e(b,{label:"姓名",prop:"name"},{default:t(()=>[e(_,{modelValue:r.nickName,"onUpdate:modelValue":a[3]||(a[3]=l=>r.nickName=l)},null,8,["modelValue"])]),_:1}),e(b,{label:"手机号",prop:"phone"},{default:t(()=>[e(_,{modelValue:r.phone,"onUpdate:modelValue":a[4]||(a[4]=l=>r.phone=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(x,{"align-center":"",title:"新增维修人员",modelValue:w.value,"onUpdate:modelValue":a[12]||(a[12]=l=>w.value=l),width:"40%",onClose:a[13]||(a[13]=l=>U(o.addFormRef))},{footer:t(()=>[F("span",ee,[e(c,{onClick:a[11]||(a[11]=l=>w.value=!1)},{default:t(()=>[u("取 消")]),_:1}),e(c,{type:"primary",onClick:L},{default:t(()=>[u("确 定")]),_:1})])]),default:t(()=>[e(N,{model:n,ref:"addFormRef","label-width":"100px"},{default:t(()=>[e(b,{label:"姓名",prop:"name"},{default:t(()=>[e(_,{modelValue:n.nickName,"onUpdate:modelValue":a[8]||(a[8]=l=>n.nickName=l)},null,8,["modelValue"])]),_:1}),e(b,{label:"手机号",prop:"phone"},{default:t(()=>[e(_,{modelValue:n.phone,"onUpdate:modelValue":a[9]||(a[9]=l=>n.phone=l)},null,8,["modelValue"])]),_:1}),e(b,{label:"密码",prop:"password"},{default:t(()=>[e(_,{modelValue:n.password,"onUpdate:modelValue":a[10]||(a[10]=l=>n.password=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),ne=Y(le,[["__scopeId","data-v-a045aef4"]]);export{ne as default};
