import{d as z,r as f,j as g,o as D,c as j,n as e,l as t,m as n,g as B,e as i,u as p,x as E,i as N}from"./index-D_0vH8B_.js";import{d as q,n as F}from"./index-CM78VC0T.js";const U=z({__name:"Instrument",setup(M){const{proxy:o}=N();let m=f({name:"",page:1,pageSize:5}),w=g(1),u=f([]);const h=g(!1),y=f({});async function c(){o.$startLoading();const l=await q(m);if(o.$closeLoading(),l.code!==1)return o.$message.error("获取列表失败");u.splice(0,u.length,...l.data.records),w.value=l.data.total}async function C(l){o.$startLoading();const r=await F(l.id);if(o.$closeLoading(),r.code!==1)return o.$message.error("服务器故障");o.$message.success("删除成功"),c()}D(()=>{c()});function $(l){Object.assign(y,l),h.value=!0}return(l,r)=>{const _=n("el-breadcrumb-item"),k=n("el-breadcrumb"),d=n("el-button"),v=n("el-input"),b=n("el-col"),x=n("el-row"),a=n("el-table-column"),V=n("el-popconfirm"),I=n("el-table"),L=n("el-card");return B(),j("div",null,[e(k,{separator:"/"},{default:t(()=>[e(_,{to:{path:"/home"}},{default:t(()=>[i("首页")]),_:1}),e(_,null,{default:t(()=>[i("系统管理")]),_:1}),e(_,null,{default:t(()=>[i("机构管理")]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(x,{gutter:20},{default:t(()=>[e(b,{span:8,offset:0},{default:t(()=>[e(v,{placeholder:"输入机构名查询",modelValue:p(m).name,"onUpdate:modelValue":r[0]||(r[0]=s=>p(m).name=s),clearable:"",onClear:c},{append:t(()=>[e(d,{icon:p(E),onClick:c},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),e(b,{span:4,offset:0},{default:t(()=>[e(d,{type:"primary",onClick:r[1]||(r[1]=s=>l.addDialogVisible=!0)},{default:t(()=>[i("新增")]),_:1})]),_:1})]),_:1}),e(I,{data:p(u),stripe:"",border:"",fit:"",style:{width:"100%"}},{default:t(()=>[e(a,{fixed:"",type:"index",sortable:"",label:"序号",align:"center",width:"100"}),e(a,{prop:"id",label:"id",align:"center",width:"200"}),e(a,{prop:"name",label:"名字",align:"center",width:"150"}),e(a,{prop:"model",label:"model",align:"center",width:"150"}),e(a,{prop:"propertyType",label:"propertyType",align:"center",width:"150"}),e(a,{prop:"description",label:"描述",align:"center",width:"500"}),e(a,{prop:"createTime",sortable:"",label:"创建时间",align:"center",width:"250"}),e(a,{prop:"updateTime",sortable:"",label:"最后更新时间",align:"center",width:"250"}),e(a,{fixed:"right",label:"操作",width:"120",align:"center"},{default:t(s=>[e(d,{link:"",type:"primary",size:"small",onClick:T=>$(s.row)},{default:t(()=>[i("编辑")]),_:2},1032,["onClick"]),e(V,{title:"是否确定删除",onConfirm:T=>C(s.row)},{reference:t(()=>[e(d,{link:"",type:"primary",size:"small"},{default:t(()=>[i("删除")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),_:1})])}}});export{U as default};
