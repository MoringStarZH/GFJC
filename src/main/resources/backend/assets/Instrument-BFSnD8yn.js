import{b as R,a as _,r as b,o as j,c as A,q as e,m as t,n as a,i as M,g as i,u as g,s as O,e as S,k as G}from"./index-BUNzSB4e.js";import{f as H,p as J,q as K}from"./index-BPolhdD0.js";const P={class:"dialog-footer"},Y=R({__name:"Instrument",setup(Q){const{proxy:r}=G();let y=_({name:"",page:1,pageSize:5}),C=b(1),V=_([]);const k=b(!1),x=_({}),$=b(),m=b(!1),n=_({name:"",model:"",propertyType:"",description:""});async function u(){r.$startLoading();const d=await H(y);if(r.$closeLoading(),d.code!==1)return r.$message.error("获取列表失败");V.splice(0,V.length,...d.data.records),C.value=d.data.total}async function T(d){r.$startLoading();const l=await J(d.id);if(r.$closeLoading(),l.code!==1)return r.$message.error("服务器故障");r.$message.success("删除成功"),u()}const I=d=>{d.resetFields()},L=async()=>{if(n.name===""||n.modle===""||n.propertyType==="")return r.$message.warning("请填写完整信息");r.$startLoading();const d=await K(n);if(r.$closeLoading(),d.code!==0)return r.$message.error("新增失败");r.$message.success("添加成功"),u(),m.value=!1};j(()=>{u()});function h(d){Object.assign(x,d),k.value=!0}return(d,l)=>{const w=a("el-breadcrumb-item"),F=a("el-breadcrumb"),p=a("el-button"),c=a("el-input"),v=a("el-col"),U=a("el-row"),s=a("el-table-column"),q=a("el-popconfirm"),z=a("el-table"),B=a("el-card"),f=a("el-form-item"),D=a("el-form"),N=a("el-dialog");return M(),A("div",null,[e(F,{separator:"/"},{default:t(()=>[e(w,{to:{path:"/home"}},{default:t(()=>[i("首页")]),_:1}),e(w,null,{default:t(()=>[i("系统管理")]),_:1}),e(w,null,{default:t(()=>[i("机构管理")]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(U,{gutter:20},{default:t(()=>[e(v,{span:8,offset:0},{default:t(()=>[e(c,{placeholder:"输入机构名查询",modelValue:g(y).name,"onUpdate:modelValue":l[0]||(l[0]=o=>g(y).name=o),clearable:"",onClear:u},{append:t(()=>[e(p,{icon:g(O),onClick:u},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),e(v,{span:4,offset:0},{default:t(()=>[e(p,{type:"primary",onClick:l[1]||(l[1]=o=>m.value=!0)},{default:t(()=>[i("新增")]),_:1})]),_:1})]),_:1}),e(z,{data:g(V),stripe:"",border:"",fit:"",style:{width:"100%"}},{default:t(()=>[e(s,{fixed:"",type:"index",sortable:"",label:"序号",align:"center",width:"100"}),e(s,{prop:"id",label:"id",align:"center",width:"200"}),e(s,{prop:"name",label:"名字",align:"center",width:"150"}),e(s,{prop:"model",label:"设备型号",align:"center",width:"150"}),e(s,{prop:"propertyType",label:"资产类型",align:"center",width:"150"}),e(s,{prop:"description",label:"描述",align:"center",width:"500"}),e(s,{prop:"createTime",sortable:"",label:"创建时间",align:"center",width:"250"}),e(s,{prop:"updateTime",sortable:"",label:"最后更新时间",align:"center",width:"250"}),e(s,{fixed:"right",label:"操作",width:"120",align:"center"},{default:t(o=>[e(p,{link:"",type:"primary",size:"small",onClick:E=>h(o.row)},{default:t(()=>[i("编辑")]),_:2},1032,["onClick"]),e(q,{title:"是否确定删除",onConfirm:E=>T(o.row)},{reference:t(()=>[e(p,{link:"",type:"primary",size:"small"},{default:t(()=>[i("删除")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),_:1}),e(N,{"align-center":"",title:"新增设备",modelValue:m.value,"onUpdate:modelValue":l[7]||(l[7]=o=>m.value=o),width:"40%",onClose:l[8]||(l[8]=o=>I($.value))},{footer:t(()=>[S("span",P,[e(p,{onClick:l[6]||(l[6]=o=>m.value=!1)},{default:t(()=>[i("取 消")]),_:1}),e(p,{type:"primary",onClick:L},{default:t(()=>[i("确 定")]),_:1})])]),default:t(()=>[e(D,{model:n,ref_key:"addFormRef",ref:$,"label-width":"100px"},{default:t(()=>[e(f,{label:"设备名称",prop:"name"},{default:t(()=>[e(c,{modelValue:n.name,"onUpdate:modelValue":l[2]||(l[2]=o=>n.name=o)},null,8,["modelValue"])]),_:1}),e(f,{label:"设备型号",prop:"model"},{default:t(()=>[e(c,{modelValue:n.phone,"onUpdate:modelValue":l[3]||(l[3]=o=>n.phone=o)},null,8,["modelValue"])]),_:1}),e(f,{label:"资产类型",prop:"propertyType"},{default:t(()=>[e(c,{modelValue:n.propertyType,"onUpdate:modelValue":l[4]||(l[4]=o=>n.propertyType=o)},null,8,["modelValue"])]),_:1}),e(f,{label:"描述",prop:"description"},{default:t(()=>[e(c,{type:"textarea",modelValue:n.description,"onUpdate:modelValue":l[5]||(l[5]=o=>n.description=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});export{Y as default};
